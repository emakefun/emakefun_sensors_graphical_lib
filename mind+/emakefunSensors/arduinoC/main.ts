enum PIN {
    //% block="A"
    A,
    //% block="B"
    B,
    //% block="A+B"
    AB
}

enum BT {
    //% block="打开"
    HIGH,
    //% block="关闭"
    LOW
}

enum TR {
    //% block="正转"
    0,
    //% block="反转"
    1
}

enum SERVO {
    //% block="D3"
    3,
    //% block="D4"
    4,
    //% block="D10"
    10,
    //% block="D12"
    12
}

enum BUTTON {
    //% block="1"
    IR_KEYCODE_1,
    //% block="2"
    IR_KEYCODE_2,
    //% block="3"
    IR_KEYCODE_3,
    //% block="4"
    IR_KEYCODE_4,
    //% block="5"
    IR_KEYCODE_5,
    //% block="6"
    IR_KEYCODE_6,
    //% block="7"
    IR_KEYCODE_7,
    //% block="8"
    IR_KEYCODE_8,
    //% block="9"
    IR_KEYCODE_9,
    //% block="0"
    IR_KEYCODE_0,
    //% block="*"
    IR_KEYCODE_STAR,
    //% block="#"
    IR_KEYCODE_POUND,
    //% block="↑"
    IR_KEYCODE_UP,
    //% block="↓"
    IR_KEYCODE_DOWN,
    //% block="OK"
    IR_KEYCODE_OK,
    //% block="←"
    IR_KEYCODE_LEFT,
    //% block="→"
    IR_KEYCODE_RIGHT
}

enum EM_BUTTON {
    //% block="1"
    EM_IR_KEYCODE_1,
    //% block="2"
    EM_IR_KEYCODE_2,
    //% block="3"
    EM_IR_KEYCODE_3,
    //% block="4"
    EM_IR_KEYCODE_4,
    //% block="5"
    EM_IR_KEYCODE_5,
    //% block="6"
    EM_IR_KEYCODE_6,
    //% block="7"
    EM_IR_KEYCODE_7,
    //% block="8"
    EM_IR_KEYCODE_8,
    //% block="9"
    EM_IR_KEYCODE_9,
    //% block="0"
    EM_IR_KEYCODE_0,
    //% block="*"
    EM_IR_KEYCODE_STAR,
    //% block="#"
    EM_IR_KEYCODE_POUND,
    //% block="↑"
    EM_IR_KEYCODE_UP,
    //% block="↓"
    EM_IR_KEYCODE_DOWN,
    //% block="OK"
    EM_IR_KEYCODE_OK,
    //% block="←"
    EM_IR_KEYCODE_LEFT,
    //% block="→"
    EM_IR_KEYCODE_RIGHT,
    //% block="A"
    EM_IR_KEYCODE_A,
    //% block="B"
    EM_IR_KEYCODE_B,
    //% block="C"
    EM_IR_KEYCODE_C,
    //% block="D"
    EM_IR_KEYCODE_D,
    //% block="+"
    EM_IR_KEYCODE_PLUS,
    //% block="-"
    EM_IR_KEYCODE_REDUCE
}

enum KEY {
    //% block="1"
    "1",
    //% block="2"
    "2",
    //% block="3"
    "3",
    //% block="4"
    "4",
    //% block="5"
    "5",
    //% block="6"
    "6",
    //% block="7"
    "7",
    //% block="8"
    "8",
    //% block="9"
    "9",
    //% block="0"
    "0",
    //% block="*"
    "*",
    //% block="#"
    "#",
    //% block="A"
    "A",
    //% block="B"
    "B",
    //% block="C"
    "C",
    //% block="D"
    "D"
}

enum STATUS {
    //% block="按下"
    0,
    //% block="释放"
    1
}

enum BTN {
    //% block="亮"
    1,
    //% block="灭"
    0
}

enum DOT {
    //% block="ON"
    true,
    //% block="OFF"
    false
}

enum TM_PIN {
    //% block="P7"
    P7
}

enum TM_DOT {
    //% block="1"
    0,
    //% block="2"
    1,
    //% block="3"
    2,
    //% block="4"
    3
}

enum TM_STATUS {
    //% block="开"
    0,
    //% block="关"
    1,
    //% block="清屏"
    2
}

enum DIRECTION {
    //% block="X轴"
    X,
    //% block="Y轴"
    Y,
    //% block="按键"
    B
}

enum PIANO_BTN {
    //% block="1"
    EM_PIANO_KEYCODE_1,
    //% block="2"
    EM_PIANO_KEYCODE_2,
    //% block="3"
    EM_PIANO_KEYCODE_3,
    //% block="4"
    EM_PIANO_KEYCODE_4,
    //% block="5"
    EM_PIANO_KEYCODE_5,
    //% block="6"
    EM_PIANO_KEYCODE_6,
    //% block="7"
    EM_PIANO_KEYCODE_7,
    //% block="8"
    EM_PIANO_KEYCODE_8
}

enum AZIMUTH {
    //% block="全部"
    E_RGB_ALL,
    //% block="左边"
    E_RGB_LEFT,
    //% block="右边"
    E_RGB_RIGHT
}

enum STYLE {
    //% block="无"
    E_EFFECT_NONE,
    //% block="呼吸"
    E_EFFECT_BREATHING,
    //% block="旋转"
    E_EFFECT_ROTATE,
    //% block="闪烁"
    E_EFFECT_FLASH
}

enum DH {
    //% block="温度"
    temperature,
    //% block="湿度"
    humidity
}

enum KAIGUAN {
    //% block="开"
    HIGH,
    //% block="关"
    LOW
}

enum MOTIFS {
    //% block="0"
    0,
    //% block="1"
    1,
    //% block="2"
    2,
    //% block="3"
    3,
    //% block="4"
    4,
    //% block="5"
    5,
    //% block="6"
    6,
    //% block="7"
    7,
    //% block="8"
    8,
    //% block="9"
    9,
    //% block="微笑"
    10,
    //% block="大笑"
    11,
    //% block="笑"
    12,
    //% block="心"
    13,
    //% block="惊讶"
    14,
    //% block="小惊讶"
    15,
    //% block="吐舌头"
    16,
    //% block="尖牙1"
    17,
    //% block="尖牙2"
    18,
    //% block="横线"
    19,
    //% block="困惑"
    20,
    //% block="竖线"
    21,
    //% block="悲伤1"
    22,
    //% block="悲伤2"
    23,
    //% block="悲伤3"
    24,
    //% block="✔"
    25,
    //% block="×"
    26,
    //% block="？"
    27,
    //% block="闪电"
    28,
    //% block="嘟嘴"
    29,
    //% block="生气"
    30
}

enum TIMES {
    //% block="年"
    getYear,
    //% block="月"
    getMonthStr,
    //% block="日"
    getDay,
    //% block="时"
    getHour,
    //% block="分"
    getMinute,
    //% block="秒"
    getSecond,
    //% block="周"
    getDOWStr,
    //% block="日期"
    getDateStr,
    //% block="时间"
    getTimeStr
}

enum SUSTAIN {
    //% block="1/2"
    500,
    //% block="1/4"
    250,
    //% block="1/8"
    125,
    //% block="整拍"
    1000,
    //% block="双拍"
    2000,
    //% block="停止"
    0
}

enum HAND_KEYA {
    //% block="A"
    BUTOON_UP,
    //% block="B"
    BUTOON_RIGHT,
    //% block="C"
    BUTOON_DOWN,
    //% block="D"
    BUTOON_LEFT,
    //% block="摇杆中心"
    JOYSTICK_BUTTON
}

enum HAND_STAT {
    //% block="按下"
    PRESS_DOWN,
    //% block="收起"
    PRESS_UP,
    //% block="单击"
    SINGLE_CLICK,
    //% block="双击"
    DOUBLE_CLICK,
    //% block="长按"
    LONG_PRESS_HOLD,
    //% block="未按"
    NONE_PRESS
}

enum ROCKERS {
    //% block="x轴方向"
    0,
    //% block="y轴方向"
    1
}

enum COMPASS {
    //% block="x轴"
    x,
    //% block="y轴"
    y,
    //% block="z轴"
    z,
    //% block="方位角"
    azimuth
}

enum NRF_MIND2 {
    //% block="最低功耗"
    RF24_PA_MIN,
    //% block="低功耗"
    RF24_PA_LOW,
    //% block="高功耗"
    RF24_PA_HIGH,
    //% block="最高功耗"
    RF24_PA_MAX
}

enum NRF_MIND3{
    //% block="2"
    2,
    //% block="3"
    3,
    //% block="4"
    4,
    //% block="5"
    5,
    //% block="6"
    6,
    //% block="7"
    7,
    //% block="8"
    8,
    //% block="9"
    9,
    //% block="10"
    10
}

enum NRF_MIND6{
    //% block="打开"
    startListening,
    //% block="关闭"
    stopListening
}

enum NRF_MIND9{
    //% block="1MB"
    1,
    //% block="2MB"
    2,
    //% block="250KB"
    250
}

enum COLOR_ONE{
    //% block="R"
    Red,
    //% block="G"
    Green,
    //% block="B"
    Blue
}

enum COLOR_two{
    //% block="转GAMMA"
    ToGamma,
    //% block="不转GAMMA"
    1
}

enum VOICES_a{
    //% block="循环识别模式"
    LOOP_MODE,
    //% block="口令模式"
    BUTTON_MODE,
    //% block="按键模式"
    KEYWORDS_MODE,
    //% block="关键字加按键模式"
    KEYWORDS_AND_BUTTON
}

enum FONT_SIZE{
    //% block="12"
    12,
    //% block="16"
    16,
    //% block="24"
    24
}

enum PRESSURE_VUE{
    //% block="A0"
    A0,
    //% block="A1"
    A1,
    //% block="A2"
    A2,
    //% block="A3"
    A3,
    //% block="A4"
    A4,
    //% block="A5"
    A5
}

// 五路循迹模块
enum INDEXPROBE {
    //% block="0"
    0,
    //% block="1"
    1,
    //% block="2"
    2,
    //% block="3"
    3,
    //% block="4"
    4
}

// TM1637四位数码管
enum SETSHOW {
    //% block="开"
    on,
    //% block="关"
    off,
    //% block="清屏"
    clear,
    //% block="闪烁"
    blink,
}

//% color="#FF8C00" iconWidth=50 iconHeight=40
namespace Sensors_kit {

    //空行
    //% block="---"
    export function speace0() {}

    //% block=" ▶ 基础输入模块" blockType="tag"
    export function baseInputModule() {}
// 基础输入模块
// 触摸模块
    //% block="The touch_module_pin initialization pins [PIN] Whether a touch has been detected" blockType="boolean"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalRead" 
    export function touch_module_pin(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`touch_pin_${pin}`, `#define touch_pin_${pin} ${pin}`);
            Generator.addSetup('touch_pin_${pin}',`pinMode(touch_pin_${pin}, INPUT);`);     
            Generator.addCode(`digitalRead(touch_pin_${pin}) == LOW`);
        }else{
        }
    }

    //% block="---"
    export function baseSpeace1() {}

// 矩阵键盘
    //% block="actuator_keyborad_pin initialize [keyboard_ID] I2C [I2C_address]" blockType="command"
    //% keyboard_ID.shadow="number" keyboard_ID.defl="1" 
    //% I2C_address.shadow="number" I2C_address.defl="0x65" 
    export function actuator_keyborad_pin(parameter: any, block: any) {
        let keyboard_id = parameter.keyboard_ID.code
        let i2c_address = parameter.I2C_address.code
        if(Generator.board === 'arduino'){
            Generator.addInclude('matrix_keyboard_v3', `#include <matrix_keyboard_v3.h>`);
            Generator.addObject( `myMatrixKeyboardV3_${keyboard_id}`, `MatrixKeyboard`,`myMatrixKeyboardV3_${keyboard_id}(${i2c_address});`);
            Generator.addSetup(`myMatrixKeyboardV3_${keyboard_id}`,`myMatrixKeyboardV3_${keyboard_id}.Setup();`);
        }else{
        }
    }

    //取键值
    //% block="actuator_keyborad_read [keyboard_ID]" blockType="reporter"
    //% keyboard_ID.shadow="number" keyboard_ID.defl="1" 
    export function actuator_keyborad_read(parameter: any, block: any) {
        let keyboard_id = parameter.keyboard_ID.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`myMatrixKeyboardV3_${keyboard_id}.GetTouchedKey()`);
        }else{
        }
    }

    //% block="---"
    export function baseSpeace2() {}

//按键模块
    //% block="Button init pins [PIN] is it detected [STATUS]" blockType="boolean"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalRead" 
    //% STATUS.shadow="dropdown" STATUS.options="STATUS" 
    export function Button(parameter: any, block: any) {
        let pin = parameter.PIN.code
        let status = parameter.STATUS.code
        if(Generator.board === 'arduino'){
            Generator.addObject(`keypad_${pin}`, 'int', `keypad_pin_${pin} = ${pin};`);
            Generator.addSetup(`key_pinMode_${pin}`, `pinMode(keypad_pin_${pin}, INPUT);`);
            if (status == 0){
                Generator.addCode(`digitalRead(keypad_pin_${pin}) == LOW`);
            }
            if (status == 1){
                Generator.addCode(`digitalRead(keypad_pin_${pin}) == HIGH`);
            }
        }else{
        }
    }

    //% block="---"
    export function baseSpeace3() {}

//碰撞开关
    //% block="crashButton init pins [PIN] whether a collision was detected?" blockType="boolean"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalRead" 
    export function crashButton(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addObject(`collision_pin_${pin}`, 'int', `collision_pin_${pin} = ${pin};`);
            Generator.addSetup(`collision_pinMode_${pin}`, `pinMode(collision_pin_${pin}, INPUT);`);
            Generator.addCode(`digitalRead(collision_pin_${pin}) == LOW`);
        }else{
        }
    }

    //% block="---"
    export function baseSpeace4() {}

//滑动变阻器
    //% block="slideRheostat pins [PIN] gets the location of the slider(0~100)" blockType="reporter"
    //% PIN.shadow="dropdown" PIN.options="PIN_AnalogRead" 
    export function slideRheostat(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addObject(`slide_pin_${pin}`, 'int', `slide_pin_${pin} = ${pin};`);
            Generator.addSetup(`slide_pinMode`, `pinMode(slide_pin_${pin}, INPUT);`);
            Generator.addCode(`analogRead(slide_pin_${pin})`);
        }else{
        }
    }

    //% block="---"
    export function baseSpeace5() {}

//旋钮电位计
    //% block="rotaryPotentiometer init pins [PIN] read the value(V)" blockType="reporter"
    //% PIN.shadow="dropdown" PIN.options="PIN_AnalogRead" 
    export function rotaryPotentiometer(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addObject(`rotary_potentiometer_pin_${pin}`, 'int', `rotary_potentiometer_pin_${pin} = ${pin};`);
            Generator.addSetup(`rotary_potentiometer_pin_${pin}`, `pinMode(rotary_potentiometer_pin_${pin}, INPUT);`);
            Generator.addCode(`analogRead(rotary_potentiometer_pin_${pin})`);
        }else{
        }
    }

    //% block="---"
    export function baseSpeace6() {}

//旋转编码器
    //% block="rotaryEncoder init interfaceA [PIN_A] interfaceB [PIN_B] interfaceC [PIN_D]" blockType="command"
    //% PIN_A.shadow="dropdown" PIN_A.options="PIN_DigitalRead"
    //% PIN_B.shadow="dropdown" PIN_B.options="PIN_DigitalRead"
    //% PIN_D.shadow="dropdown" PIN_D.options="PIN_DigitalRead" 
    export function rotaryEncoder(parameter: any, block: any) {
        let a_pin = parameter.PIN_A.code
        let b_pin = parameter.PIN_B.code
        let d_pin = parameter.PIN_D.code
        if(Generator.board === 'arduino'){
            let nameA = '#define ENCODER_A_PIN '+a_pin;
            let nameB = '#define ENCODER_B_PIN '+b_pin;
            let name = '#define SWITCH_PIN '+d_pin;
            Generator.addInclude('PIN', nameA+'\n'+nameB+'\n'+name+'\nlong position, oldposition;\n'+
            '\nvoid read_quadrature(){\n  if (digitalRead(ENCODER_A_PIN) == LOW){\n    if (digitalRead(ENCODER_B_PIN) == LOW)\n      position++;\n  }\n'+
            '  else {\n    if (digitalRead(ENCODER_B_PIN) == LOW)\n      position--;\n  }\n  oldposition = position;\n}');
            Generator.addSetup(`ENCODER_A_PIN`,`pinMode(ENCODER_A_PIN, INPUT);`);
            Generator.addSetup(`ENCODER_B_PIN`,`pinMode(ENCODER_B_PIN, INPUT);`);
            Generator.addSetup(`SWITCH_PIN`,`pinMode(SWITCH_PIN, INPUT);`);
        }else{
        }
    }
    //% block="rotaryEncoder value" blockType="reporter"
    export function rotaryEncoder_value(parameter: any, block: any) {
        if(Generator.board === 'arduino'){
            Generator.addSetup(`attachInterrupt`,`attachInterrupt(1, read_quadrature, CHANGE);`);
            Generator.addCode(`position`);
        }else{
        }
    }
    //% block="whether the rotary encoder button is pressed?" blockType="boolean"
    export function rotaryEncoder_button(parameter: any, block: any) {
        if(Generator.board === 'arduino'){
            Generator.addCode(`digitalRead(SWITCH_PIN) == LOW`);
        }else{
        }
    }

    //% block="---"
    export function baseSpeace7() {}

//遥杆
    //% block="rocker module init pins X[X_PIN] Y[Y_PIN] B[B_PIN] status [DIRECTION] value " blockType="reporter"
    //% X_PIN.shadow="dropdown" X_PIN.options="PIN_AnalogRead" 
    //% Y_PIN.shadow="dropdown" Y_PIN.options="PIN_AnalogRead" 
    //% B_PIN.shadow="dropdown" B_PIN.options="PIN_DigitalRead" 
    //% DIRECTION.shadow="dropdown" DIRECTION.options="DIRECTION" 
    export function rocker(parameter: any, block: any) {
        let x_pin = parameter.X_PIN.code
        let y_pin = parameter.Y_PIN.code
        let b_pin = parameter.B_PIN.code
        let direction = parameter.DIRECTION.code
        if(Generator.board === 'arduino'){
            Generator.addInclude('rocker', `#define JOYSTICK_X_${x_pin} ${x_pin}\n#define JOYSTICK_Y_${y_pin} ${y_pin}\n#define JOYSTICK_B_${b_pin} ${b_pin}`);
            Generator.addObject('rocker_obj','int',`value_x_${x_pin}, value_y_${y_pin}, value_b_${b_pin};`);
            Generator.addSetup('rocker_pinMode',`pinMode(JOYSTICK_X_${x_pin}, INPUT);\n  pinMode(JOYSTICK_Y_${y_pin}, INPUT);\n  pinMode(JOYSTICK_B_${b_pin}, INPUT);`);
            if (direction == 'X'){
                Generator.addCode(`analogRead(JOYSTICK_X_${x_pin})`);
            }
            if (direction == 'Y'){
                Generator.addCode(`analogRead(JOYSTICK_Y_${y_pin})`);
            }
            if (direction == 'B'){
                Generator.addCode(`digitalRead(JOYSTICK_B_${b_pin})`);
            }
        }else{
        }
    }

    //% block="---"
    export function baseSpeace8() {}

// 触摸钢琴V2
    //% block="basic_piano_play pins CLK[C_PIN] DIO[D_PIN] press the button [PIANO_BTN]" blockType="boolean"
    //% C_PIN.shadow="dropdown" C_PIN.options="PIN_DigitalWrite" 
    //% D_PIN.shadow="dropdown" D_PIN.options="PIN_DigitalWrite" 
    //% PIANO_BTN.shadow="dropdown" PIANO_BTN.options="PIANO_BTN" 
    export function basic_piano_play(parameter: any, block: any) {
        let c_pin = parameter.C_PIN.code
        let d_pin = parameter.D_PIN.code
        let piano_btn = parameter.PIANO_BTN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude('EM_Piano', '#include <EM_Piano.h>');
            Generator.addObject( `mPiano_${c_pin}${d_pin}`, `Piano`,`mPiano_${c_pin}${d_pin};`);
            Generator.addSetup(`mPiano_${c_pin}${d_pin}.initPiano`,`mPiano_${c_pin}${d_pin}.initPiano(${c_pin}, ${d_pin});`);
            Generator.addCode(`mPiano_${c_pin}${d_pin}.PressBsButton(${piano_btn})`);
        }else{
        }
    }

    //空行
    //% block="---"
    export function speace1() {}
    //% block=" ▶ 执行器" blockType="tag"
    export function actuatorModule() {}
    // 执行器
    // 有源蜂鸣器
    //% block="actuator_buzzer0 [PIN] status [BTN]" blockType="command"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalWrite"
    //% BTN.shadow="dropdown" BTN.options="BT" BTN.defl="BT.A"
    export function actuator_buzzer0(parameter: any, block: any) {
        let pin = parameter.PIN.code
        let btn = parameter.BTN.code
        pin = replace(pin);
        btn = replace(btn);
        if(Generator.board === 'arduino'){
            Generator.addInclude(`active_buzzer_${pin}`, `#define active_buzzer_pin_${pin} ${pin}`);
            Generator.addSetup(`active_buzzer_${pin}`, `pinMode(active_buzzer_pin_${pin}, OUTPUT);`);
            Generator.addCode(`digitalWrite(active_buzzer_pin_${pin}, ${btn});`);
        }else{
        }
    }
    //% block="---"
    export function actuatorSpeace1() {}

// 无源蜂鸣器 
    //% block="actuator_buzzer1 [PIN] status [STR] time of duration [SUSTAIN]" blockType="command"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalWrite" 
    //% STR.shadow="note" STR.defl=247
    //% SUSTAIN.shadow="dropdown"  SUSTAIN.options="SUSTAIN"
    export function actuator_buzzer1(parameter: any, block: any) {
        let pin = parameter.PIN.code
        let hz = parameter.STR.code
        let sustain = parameter.SUSTAIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`Passive_buzzer_${pin}`, `#define Passive_buzzer_pin_${pin} ${pin}`);
            Generator.addSetup(`Passive_buzzer_${pin}`, `pinMode(Passive_buzzer_pin_${pin}, OUTPUT);`);
            Generator.addCode(`tone(Passive_buzzer_pin_${pin}, ${hz}, ${sustain});`);
        }else{
        }
    }
    //% block="---"
    export function actuatorSpeace2() {}

// 继电器
    //% block="actuator_relay [PIN] status [BTN]" blockType="command"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalWrite" 
    //% BTN.shadow="dropdown" BTN.options="BT" BTN.defl="BT.A"
    export function actuator_relay(parameter: any, block: any) {
        let pin = parameter.PIN.code
        let btn = parameter.BTN.code
        pin = replace(pin);
        btn = replace(btn);
        if(Generator.board === 'arduino'){
            Generator.addInclude(`relay_${pin}`, `#define relay_pin_${pin} ${pin}`);
            Generator.addSetup(`relay_${pin}`, `pinMode(relay_pin_${pin}, OUTPUT);`);
            Generator.addCode(`digitalWrite(relay_pin_${pin}, ${btn});`);
        }else{
        }
    }

    //% block="---"
    export function actuatorSpeace3() {}
// 单路电机驱动
    //% block="actuator_motor_run INA [PIN_A] INB [PIN_B] speed [SPEED]" blockType="command"
    //% PIN_A.shadow="dropdown" PIN_A.options="PIN_AnalogWrite" PIN_A.defl="PIN_AnalogWrite.3"
    //% PIN_B.shadow="dropdown" PIN_B.options="PIN_AnalogWrite" PIN_B.defl="PIN_AnalogWrite.5"
    //% SPEED.shadow="range" SPEED.params.min=-255 SPEED.params.max=255 SPEED.defl=0
    export function actuator_motor_run(parameter: any, block: any) {
        let pin_a = parameter.PIN_A.code
        let pin_b = parameter.PIN_B.code
        let speed = parameter.SPEED.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`DianJiA_${pin_a}`, `#define INA_${pin_a} ${pin_a}`);
            Generator.addInclude(`DianJiB_${pin_b}`, `#define INB_${pin_b} ${pin_b}`);
            Generator.addSetup(`PinMode_A_${pin_a}`, `pinMode(INA_${pin_a}, OUTPUT);`);
            Generator.addSetup(`PinMode_B_${pin_b}`, `pinMode(INB_${pin_b}, OUTPUT);`);
            if (speed >= 0) {
                Generator.addCode(`analogWrite(INA_${pin_a}, ${speed});\n\tanalogWrite(INB_${pin_b}, 0);`);
            } else {
                Generator.addCode(`analogWrite(INA_${pin_a}, 0);\n\tanalogWrite(INB_${pin_b}, abs(${speed}));`);
            }
        }else{
        }
    }

    //% block="---"
    export function actuatorSpeace4() {}
    // 双路电机驱动
    //% block="Dual_Motors initialization interface IN1 [IN_1] IN2 [IN_2] IN3 [IN_3] IN4 [IN_4] IN1-IN2 speed [SPEED1] IN3-IN4 speed [SPEED2]" blockType="command"
    //% IN_1.shadow="dropdown" IN_1.options="PIN_AnalogWrite" 
    //% IN_2.shadow="dropdown" IN_2.options="PIN_AnalogWrite" 
    //% IN_3.shadow="dropdown" IN_3.options="PIN_AnalogWrite" 
    //% IN_4.shadow="dropdown" IN_4.options="PIN_AnalogWrite" 
    //% SPEED1.shadow="range" SPEED1.params.min=-255 SPEED1.params.max=255 SPEED1.defl=0
    //% SPEED2.shadow="range" SPEED2.params.min=-255 SPEED2.params.max=255 SPEED2.defl=0
    export function Dual_Motors(parameter: any, block: any) {
        let in1 = parameter.IN_1.code
        let in2 = parameter.IN_2.code
        let in3 = parameter.IN_3.code
        let in4 = parameter.IN_4.code
        let speed1 = parameter.SPEED1.code
        let speed2 = parameter.SPEED2.code
        if(Generator.board === 'arduino'){
            Generator.addInclude('IN_PIN', `#define IN1_PIN_${in1} ${in1}\n#define IN2_PIN_${in2} ${in2}\n#define IN3_PIN_${in3} ${in3}\n#define IN4_PIN_${in4} ${in4}`);
            Generator.addSetup(`IN1_${in1}`,`pinMode(IN1_PIN_${in1}, OUTPUT);`);
            Generator.addSetup(`IN2_${in2}`,`pinMode(IN2_PIN_${in2}, OUTPUT);`);
            Generator.addSetup(`IN3_${in3}`,`pinMode(IN3_PIN_${in3}, OUTPUT);`);
            Generator.addSetup(`IN4_${in4}`,`pinMode(IN4_PIN_${in4}, OUTPUT);`);
            let in12Speed = "";
            let in34Speed = "";
            if(speed1 > 0) {
                in12Speed = `analogWrite(IN1_PIN_${in1}, LOW);\n  analogWrite(IN2_PIN_${in2}, ${speed1});`;
            } else {
                in12Speed = `analogWrite(IN2_PIN_${in2}, LOW);\n  analogWrite(IN1_PIN_${in1}, abs(${speed1}));`;
            }
            if(speed2 > 0) {
                in34Speed = `  analogWrite(IN3_PIN_${in3}, ${speed2});\n  analogWrite(IN4_PIN_${in4}, LOW);`;
            } else {
                in34Speed = `  analogWrite(IN4_PIN_${in4}, abs(${speed2}));\n  analogWrite(IN3_PIN_${in3}, LOW);`;
            }
            Generator.addCode(`${in12Speed}\n${in34Speed}`);
        }else{
        }
    }

    //% block="---"
    export function actuatorSpeace5() {}
    // 舵机 
    //% block="actuator_servo pin [PIN] angel [ANGEL]" blockType="command"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalWrite" 
    //% ANGEL.shadow="angle" ANGEL.params.edge=1 
    export function actuator_servo(parameter: any, block: any) {
        let pin = parameter.PIN.code
        let angel = parameter.ANGEL.code
        if(Generator.board === 'arduino'){
            let name = 'Servo servo_' + pin + ';';
            Generator.addInclude('Servo', '#include <Servo.h>\n' + name);
            Generator.addSetup(`Servopin_${pin}`, `servo_${pin}.attach(${pin});`);
            Generator.addCode(`servo_${pin}.write(${angel});`);
        }else{
        }
    }
	
    // 舵机 
    //% block="actuator_servo timer2 pin [PIN] angel [ANGEL]" blockType="command"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalWrite" 
    //% ANGEL.shadow="angle" ANGEL.params.edge=1 
    export function actuator_servo_timer2(parameter: any, block: any) {
        let pin = parameter.PIN.code
        let angel = parameter.ANGEL.code
        if(Generator.board === 'arduino'){
            let name = 'Timer2Servo servo_' + pin + ';';
            Generator.addInclude('Servo', '#include <Timer2ServoPwm.h>\n' + name);
            Generator.addSetup(`Servopin_${pin}`, `servo_${pin}.attach(${pin});`);
            Generator.addCode(`servo_${pin}.write(${angel});`);
        }else{
        }
    }

    //% block="---"
    export function actuatorSpeace6() {}
// 激光发射
    //% block="Laser Emission Sensor Interface Initialization [PIN] [SWITCHS]" blockType="command"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalWrite" 
    //% SWITCHS.shadow="dropdown" SWITCHS.options="KAIGUAN" 
    export function Laser_Emission(parameter: any, block: any) {
        let pin = parameter.PIN.code
        let switchs = parameter.SWITCHS.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`laser_${pin}`, `#define laser_pin_${pin} ${pin}`);
            Generator.addSetup(`laser_${pin}`, `pinMode(laser_pin_${pin}, OUTPUT);`);
            Generator.addCode(`digitalWrite(laser_pin_${pin}, ${switchs});`);
        }else{
        }
    }

    //空行
    //% block="---"
    export function speace2() {}
    //% block=" ▶ 显示器" blockType="tag"
    export function displayModule() {}
    // 显示器
    //OLED
    //% block="OLED_START1 LED initialize" blockType="command"
    export function OLED_START1(parameter: any, block: any){
        if(Generator.board === 'arduino'){
            Generator.addInclude( 'oled' ,`#include <OLED.h>\nOLED oled;`);
            Generator.addSetup('oled',`oled.OLED_Init();\n  oled.OLED_ColorTurn(0);\n  oled.OLED_DisplayTurn(0);`);//修改：芒果，问题：\n后面确少空格，换行后代码格式问题//
        }else{

        }
    }
    //% block="OLED_START2 OLED refresh" blockType="command"
    export function OLED_START2(parameter: any, block: any){
        if(Generator.board === 'arduino'){
            Generator.addCode(`oled.OLED_Refresh();`);
        }else{

        }
    }
    //% block="OLED_START3 OLED cls" blockType="command"
    export function OLED_START3(parameter: any, block: any){
        if(Generator.board === 'arduino'){
            Generator.addCode(`oled.OLED_Clear();`);
        }else{

        }
    }
    //% block="OLED_START4 OLED string abscissa [LEDA] ordinate [LEDB] content [LEDC] font size [LEDSZ]" blockType="command"
    //% LEDA.shadow="number" LEDA.defl=128
    //% LEDB.shadow="number" LEDB.defl=32
    //% LEDSZ.shadow="dropdown" LEDSZ.options="FONT_SIZE"
    //% LEDC.shadow="string" LEDC.defl=0
    export function OLED_START4(parameter: any, block: any){
        let leda = parameter.LEDA.code
        let ledb = parameter.LEDB.code
        let ledsz = parameter.LEDSZ.code
        let ledc = parameter.LEDC.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`oled.OLED_ShowString(${leda},${ledb},${ledc},${ledsz});`);
        }else{

        }
    }
    //% block="OLED_START5 OLED character abscissa [LEDA] ordinate [LEDB] content [LEDD] font size [LEDSZ]" blockType="command"
    //% LEDA.shadow="number" LEDA.defl=128
    //% LEDB.shadow="number" LEDB.defl=32
    //% LEDSZ.shadow="dropdown" LEDSZ.options="FONT_SIZE"
    //% LEDD.shadow="string" LEDD.defl=0
    export function OLED_START5(parameter: any, block: any){
        let leda = parameter.LEDA.code
        let ledb = parameter.LEDB.code
        let ledsz = parameter.LEDSZ.code
        let ledd = parameter.LEDD.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`oled.OLED_ShowChar(${leda},${ledb},${ledd},${ledsz});`);
        }else{

        }
    }
    //% block="OLED_START6 OLED number abscissa [LEDA] ordinate [LEDB] content [LEDE] digit [LEDF] font size [LEDSZ]" blockType="command"
    //% LEDA.shadow="number" LEDA.defl=128
    //% LEDB.shadow="number" LEDB.defl=32
    //% LEDSZ.shadow="dropdown" LEDSZ.options="FONT_SIZE"
    //% LEDE.shadow="number" LEDE.defl=123
    //% LEDF.shadow="number" LEDF.defl=3
    export function OLED_START6(parameter: any, block: any){
        let leda = parameter.LEDA.code
        let ledb = parameter.LEDB.code
        let ledsz = parameter.LEDSZ.code
        let lede = parameter.LEDE.code
        let ledf = parameter.LEDF.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`oled.OLED_ShowNum(${leda},${ledb},${lede},${ledf},${ledsz});`);
        }else{

        }
    }
    //% block="OLED_START7 OLED setting-out start abscissa [LEDG] ordinate [LEDH] end abscissa [LEDI] ordinate [LEDJ]" blockType="command"
    //% LEDG.shadow="number" LEDG.defl=0
    //% LEDH.shadow="number" LEDH.defl=0
    //% LEDI.shadow="number" LEDI.defl=0
    //% LEDJ.shadow="number" LEDJ.defl=0
    export function OLED_START7(parameter: any, block: any){
        let ledg = parameter.LEDG.code
        let ledh = parameter.LEDH.code
        let ledi = parameter.LEDI.code
        let ledj = parameter.LEDJ.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`oled.OLED_DrawLine(${ledg},${ledh},${ledi},${ledj});`);
        }else{

        }
    }
    //% block="OLED_START8 OLED describing circle abscissa [LEDK] ordinate [LEDL] radius [LEDM]" blockType="command"
    //% LEDK.shadow="number" LEDk.defl=128
    //% LEDL.shadow="number" LEDL.defl=32
    //% LEDM.shadow="number" LEDM.defl=0
    export function OLED_START8(parameter: any, block: any){
        let ledk = parameter.LEDk.code
        let ledl = parameter.LEDL.code
        let ledm = parameter.LEDM.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`oled.OLED_DrawCircle(${ledk},${ledl},${ledm});`);
        }else{
        }
    }

    //% block="---"
    export function displaySpeace1() {}
// LED灯
    //% block="Led pins [PIN] [SWITCH]" blockType="command"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalWrite" 
    //% SWITCH.shadow="dropdown" SWITCH.options="BT" 
    export function setled(parameter: any, block: any) {
        let pin = parameter.PIN.code
        let bt = parameter.SWITCH.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`LED_${pin}`, `#define LED_${pin} ${pin}\n`);
            Generator.addSetup(`LED_pinMode`,`pinMode(LED_${pin}, OUTPUT);`);
            Generator.addCode(`digitalWrite(LED_${pin}, ${bt});`);
        }else{
        }
    }

    //% block="---"
    export function displaySpeace2() {}
// RGB灯
    //% block="setRGBpin pins R[R_PIN] G[G_PIN] B[B_PIN] color [COLOR]" blockType="command"
    //% R_PIN.shadow="dropdown" R_PIN.options="PIN_DigitalWrite" 
    //% G_PIN.shadow="dropdown" G_PIN.options="PIN_DigitalWrite" 
    //% B_PIN.shadow="dropdown" B_PIN.options="PIN_DigitalWrite" 
    //% COLOR.shadow="colorSlider" COLOR.defl="#f0f"
    export function setRGBpin(parameter: any, block: any) {
        let r_pin = parameter.R_PIN.code
        let g_pin = parameter.G_PIN.code
        let b_pin = parameter.B_PIN.code
        if(Generator.board === 'arduino'){
            let str = parameter.COLOR.code
            let str1 = parseInt('0x' + str.slice(2, 4))
            let str2 = parseInt('0x' + str.slice(4, 6))
            let str3 = parseInt('0x' + str.slice(6, 8))
            Generator.addInclude(`pins_${r_pin}${g_pin}${b_pin}`, `#define RGB_RED_${r_pin} ${r_pin}\n#define RGB_GREEN_${g_pin} ${g_pin}\n#define RGB_BLUE_${b_pin} ${b_pin}`);
            Generator.addSetup(`R_pinMode_${r_pin}`,`pinMode(RGB_RED_${r_pin}, OUTPUT);`);
            Generator.addSetup(`G_pinMode_${g_pin}`,`pinMode(RGB_GREEN_${g_pin}, OUTPUT);`);
            Generator.addSetup(`B_pinMode_${b_pin}`,`pinMode(RGB_BLUE_${b_pin}, OUTPUT);`);
            Generator.addCode(`analogWrite(RGB_RED_${r_pin}, ${str1});\n  analogWrite(RGB_GREEN_${g_pin}, ${str2});\n  analogWrite(RGB_BLUE_${b_pin}, ${str3});`);
        }else{
        }
    }

    //% block="---"
    export function displaySpeace3() {}
// 交通灯
    //% block="traffic light pins G[G_PIN] Y[Y_PIN] R[R_PIN] red [R_BTN] green [G_BTN] yellow [Y_BTN] time [TIME]" blockType="command"
    //% G_PIN.shadow="dropdown" G_PIN.options="PIN_DigitalWrite" 
    //% Y_PIN.shadow="dropdown" Y_PIN.options="PIN_DigitalWrite" 
    //% R_PIN.shadow="dropdown" R_PIN.options="PIN_DigitalWrite" 
    //% R_BTN.shadow="dropdown" R_BTN.options="BTN"
    //% G_BTN.shadow="dropdown" G_BTN.options="BTN"
    //% Y_BTN.shadow="dropdown" Y_BTN.options="BTN"
    //% TIME.shadow="number" TIME.defl=0
    export function traffic_light(parameter: any, block: any) {
        let g_pin = parameter.G_PIN.code
        let y_pin = parameter.Y_PIN.code
        let r_pin = parameter.R_PIN.code
        let r = parameter.R_BTN.code
        let g = parameter.G_BTN.code
        let y = parameter.Y_BTN.code
        let time = parameter.TIME.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`RGB_PINS_${r_pin}${g_pin}${y_pin}`, `#define traffic_RED_${r_pin} ${r_pin}\n#define traffic_GREEN_${g_pin} ${g_pin}\n#define traffic_YELLOW_${y_pin} ${y_pin}`);
            Generator.addSetup(`traffic_R_pinMode_${r_pin}`,`pinMode(traffic_RED_${r_pin}, OUTPUT);`);
            Generator.addSetup(`traffic_G_pinMode_${g_pin}`,`pinMode(traffic_GREEN_${g_pin}, OUTPUT);`);
            Generator.addSetup(`traffic_Y_pinMode_${g_pin}`,`pinMode(traffic_YELLOW_${y_pin}, OUTPUT);`);
            Generator.addCode(`digitalWrite(traffic_GREEN_${g_pin}, ${g});\n  digitalWrite(traffic_YELLOW_${y_pin}, ${y});\n  digitalWrite(traffic_RED_${r_pin}, ${r});\n  delay(${time});`);
        }else{
        }
    }

    //% block="---"
    export function displaySpeace4() {}
// I2C lcd1602
    //% block="i2cLcdInit location [LOCATION]" blockType="command"
    //% LOCATION.shadow="number" LOCATION.defl=0x27 
    export function i2cLcdInit(parameter: any, block: any) {
        let location = parameter.LOCATION.code
        if(Generator.board === 'arduino'){
            let name = 'LiquidCrystal_I2C' + ' mylcd(' + location + ", 16, 2);";
            Generator.addInclude('LiquidCrystal_I2C', '#include <LiquidCrystal_I2C.h>\n#include <Wire.h>\n' + name);
            Generator.addCode(`mylcd.init();\n  mylcd.backlight();`);
        }else{
        }
    }

    //% block="i2cLcdcursor line [LINE] list [LIST]" blockType="command"
    //% LINE.shadow="number" LINE.defl=1 
    //% LIST.shadow="number" LIST.defl=1 
    export function i2cLcdcursor(parameter: any, block: any) {
        let line = parameter.LINE.code
        let list = parameter.LIST.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`mylcd.setCursor(${list} - 1, ${line} - 1);`);
        }else{
        }
    }

    //% block="i2cLcdShow [CONTENT]" blockType="command"
    //% CONTENT.shadow="string" CONTENT.defl=hello 
    export function i2cLcdShow(parameter: any, block: any) {
        let content = parameter.CONTENT.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`mylcd.print(${content});`);
        }else{
        }
    }

    //% block="i2cLcdClear" blockType="command"
    export function i2cLcdClear(parameter: any, block: any) {
        if(Generator.board === 'arduino'){
            Generator.addCode(`mylcd.clear();`);
        }else{
        }
    }

    //% block="---"
    export function displaySpeace5() {}
// tm1637数码管
    //% block="TM1637_set_init  ID[TM1637_ID] CLK [C_PIN] DIO [D_PIN]" blockType="command"
    //% TM1637_ID.shadow="number" TM1637_ID.defl="1" 
    //% C_PIN.shadow="dropdown" C_PIN.options="PIN_DigitalWrite" 
    //% D_PIN.shadow="dropdown" D_PIN.options="PIN_DigitalWrite" 
    export function TM1637_set_init(parameter: any, block: any) {
        let TM1637_id = parameter.TM1637_ID.code
        let c_pin = parameter.C_PIN.code
        let d_pin = parameter.D_PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude('SevenSegmentTM1637', '#include <SevenSegmentTM1637.h>');
            Generator.addInclude('SevenSegmentExtended', '#include <SevenSegmentExtended.h>');
            Generator.addObject( `tm1637_display_${TM1637_id}`, `SevenSegmentExtended`,`tm1637_display_${TM1637_id}(${c_pin},${d_pin});`);
            Generator.addSetup(`tm1637_display_${TM1637_id}.begin`,`tm1637_display_${TM1637_id}.begin();`);
        }else{        }

    }

    //亮度设置
    //% block="TM1637_set_intensity  ID[TM1637_ID] [INTENSITY]" blockType="command"
    //% TM1637_ID.shadow="number" TM1637_ID.defl="1" 
    //% INTENSITY.shadow="range"   INTENSITY.params.min=0    INTENSITY.params.max=100    INTENSITY.defl=20
    export function TM1637_set_intensity(parameter: any, block: any) {
        let TM1637_id = parameter.TM1637_ID.code
        let intensity = parameter.INTENSITY.code
        if(Generator.board === 'arduino'){         
            Generator.addCode(`tm1637_display_${TM1637_id}.setBacklight(${intensity});`);
        }else{
        }
    }

    //清屏、闪烁、开、关
    //% block="TM1637_Show_Clear ID[TM1637_ID] [SETSHOW]" blockType="command"
    //% TM1637_ID.shadow="number" TM1637_ID.defl="1" 
    //% SETSHOW.shadow="dropdown" SETSHOW.options="SETSHOW" SETSHOW.defl="SETSHOW.clear"
    export function TM1637_Show_Clear(parameter: any, block: any) {
        let TM1637_id = parameter.TM1637_ID.code
        let setshow = parameter.SETSHOW.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`tm1637_display_${TM1637_id}.${setshow}();`);
        }else{
        }
    }

    //显示字符串
    //% block="TM1637_Show ID[TM1637_ID] [SHOW]" blockType="command"
    //% TM1637_ID.shadow="number" TM1637_ID.defl="1" 
    //% SHOW.shadow="string" SHOW.defl=1234
    export function TM1637_Show(parameter: any, block: any) {
        let TM1637_id = parameter.TM1637_ID.code
        // let setshow = parameter.SETSHOW.code
        let show = parameter.SHOW.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`tm1637_display_${TM1637_id}.print(${show});`);
        }else{
        }
    }

    //显示时钟
    //% block="TM1637_Show_Time  ID[TM1637_ID] [HOUR] hour [MINUTE] minute Dot [DOT]" blockType="command"
    //% TM1637_ID.shadow="number" TM1637_ID.defl="1" 
    //% HOUR.shadow="number" HOUR.defl=11
    //% MINUTE.shadow="number" MINUTE.defl=30
    //% DOT.shadow="dropdown" DOT.options="DOT"
    export function TM1637_Show_Time(parameter: any, block: any) {
        let TM1637_id = parameter.TM1637_ID.code
        let minute = parameter.MINUTE.code
        let hour = parameter.HOUR.code
        let dot = parameter.DOT.code
        if(Generator.board === 'arduino'){
            //Generator.addObject( `tm1637_display_${TM1637_id}`, `SevenSegmentExtended`,`tm1637_display_${TM1637_id}();`);
            Generator.addCode(`tm1637_display_${TM1637_id}.printTime(${hour},${minute},${dot});`);
        }else{
        }
    }

    //% block="---"
    export function displaySpeace6() {}
// TM1650数码管
    //% block="TM1650_set_init interface I2C" blockType="command"
    export function TM1650_set_init(parameter: any, block: any) {
        if(Generator.board === 'arduino'){
            let name = 'TM1650' + ' tm_4display;';
            Generator.addInclude('TM1650_set_init', '#include <TM1650.h>\n#include <Wire.h>\n' + name);
            Generator.addSetup(`Wire`,`Wire.begin();`);
            Generator.addSetup(`tm_4display`,`tm_4display.init();`);
            Generator.addCode(`tm_4display.displayOn();`);
        }else{
        }
    }

    //% block="TM1650_set_show_string [CS]" blockType="command"
    //% CS.shadow="string" MINUTE.defl=1234
    export function TM1650_set_show_string(parameter: any, block: any) {
        let character_string = parameter.CS.code
        if(Generator.board === 'arduino'){
            let name = 'TM1650' + ' tm_4display;';
            Generator.addInclude('TM1650_set_init', '#include <TM1650.h>\n#include <Wire.h>\n' + name);
            Generator.addSetup(`tm_4display`,`tm_4display.init();`);
            Generator.addCode(`tm_4display.displayString(${character_string});`);
        }else{
        }
    }
    //% block="TM1650_set_show_dot number [TM_DOT] decimal point [BTN]" blockType="command"
    //% TM_DOT.shadow="dropdown" TM_DOT.options="TM_DOT" 
    //% BTN.shadow="dropdown" BTN.options="BTN" 
    export function TM1650_set_show_dot(parameter: any, block: any) {
        let tm_dot = parameter.TM_DOT.code
        let btn = parameter.BTN.code
        if(btn == 1){
            btn = true
        }
        if(btn == 0){
            btn = false
        }
        if(Generator.board === 'arduino'){
            let name = 'TM1650' + ' tm_4display;';
            Generator.addInclude('TM1650_set_init', '#include <TM1650.h>\n#include <Wire.h>\n' + name);
            Generator.addSetup(`tm_4display`,`tm_4display.init();`);
            Generator.addCode(`tm_4display.setDot(${tm_dot},${btn});`);
        }else{
        }
    }
    //% block="TM1650_Show_Status [TM_STATUS]" blockType="command"
    //% TM_STATUS.shadow="dropdown" TM_STATUS.options="TM_STATUS" 
    export function TM1650_Show_Status(parameter: any, block: any) {
        let tm_status = parameter.TM_STATUS.code
        if(Generator.board === 'arduino'){
            let name = 'TM1650' + ' tm_4display;';
            Generator.addInclude('TM1650_set_init', '#include <TM1650.h>\n#include <Wire.h>\n' + name);
            Generator.addSetup(`tm_4display`,`tm_4display.init();`);
            if(tm_status == 0){
                Generator.addCode(`tm_4display.displayOn();`);
            }
            if(tm_status == 1){
                Generator.addCode(`tm_4display.displayOff();`);
            }
            if(tm_status == 2){
                Generator.addCode(`tm_4display.clear();`);
            }
        }else{
        }
    }

    //% block="---"
    export function displaySpeace7() {}
//8x8点阵
    //% block="Dot matrix init interface DIN [DIN] CS [CS] CLK [CLK] Dot matrix number [MN]" blockType="command"
    //% DIN.shadow="dropdown" DIN.options="PIN_DigitalWrite" 
    //% CS.shadow="dropdown" CS.options="PIN_DigitalWrite" 
    //% CLK.shadow="dropdown" CLK.options="PIN_DigitalWrite" 
    //% MN.shadow="number" MN.defl=1
    export function init_Dot_Matrix(parameter: any, block: any) {
        let din = parameter.DIN.code
        let cs = parameter.CS.code
        let clk = parameter.CLK.code
        let mn = parameter.MN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude('MaxMatrixs',`#include <MaxMatrix.h>`);
            Generator.addInclude('MaxMatrix_PIN', `#define DIN_PIN ${din}\n#define CS_PIN ${cs}\n#define CLK_PIN ${clk}`);
            Generator.addObject('MaxMatrix', `MaxMatrix`, `ledmatrix(DIN_PIN,CS_PIN,CLK_PIN, ${mn});`);
            Generator.addSetup('MaxMatrix', `ledmatrix.init();\n  ledmatrix.setIntensity(1);\n  ledmatrix.clearMatrix();`);
        }else{
        }
    }
    //% block="Dot matrix display [MOTIFS]" blockType="command"
    //% MOTIFS.shadow="dropdown" MOTIFS.options="MOTIFS" 
    export function motifs_Matrix(parameter: any, block: any) {
        let motifs = parameter.MOTIFS.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`ledmatrix.drawShape(ledmatrix.getMouthShape(${motifs}));`);
        }else{
        }
    }
    //% extenralFunc
    export function getBuiltinFunc_() {
        return [
            {matrix: "0000000000011000001111000101101000011000000110000001100000000000"},
            {matrix: "0000000000011000000110000001100001011010001111000001100000000000"},
            {matrix: "0000000000010000001000000111111001111110001000000001000000000000"},
            {matrix: "0000000000001000000001000111111001111110000001000000100000000000"}
            //{matrix: "0010001000111110100000100"}
        ]
    }
    //% block="Dot matrix hand dot display [MT]" blockType="command"
    //% MT.shadow="matrix" MT.params.row=8 MT.params.column=8
    //% MT.params.builtinFunc="getBuiltinFunc_"
    export function set_finger_Matrix(parameter: any, block: any) {
        let mt = parameter.MT.code
        mt = bin_to_hex(mt)
        if(Generator.board === 'arduino'){
            Generator.addCode(`ledmatrix.writeFull(0x${mt});`);
        }else{
        }
    }

    //% block="---"
    export function displaySpeace8() {}
//RGB灯环
    //% block="RGB ring initialization IO interface [PIN] num [NUM]" blockType="command"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalWrite" 
    //% NUM.shadow="range" BRIGHTNESS.defl=12
    export function RGB_Ring(parameter: any, block: any) {
        let pin = parameter.PIN.code
        let num = parameter.NUM.code
        if(Generator.board === 'arduino'){
            Generator.addInclude('RGBLed', '#include <RGBLed.h>');
            Generator.addInclude('RgbPin', `#define RgbPin ${pin}`);
            Generator.addObject('Rgb_Obj', 'RGBLed', `mRgb(RgbPin, ${num});`, true);
        }else{
        }
    }

    //% block="Set RGB ring brightness [BRIGHTNESS]" blockType="command"
    //% BRIGHTNESS.shadow="range" BRIGHTNESS.params.min=0 BRIGHTNESS.params.max=100 BRIGHTNESS.defl=0
    export function RGB_Ring_Brightness(parameter: any, block: any) {
        let brightness = parameter.BRIGHTNESS.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`mRgb.setBrightness(${brightness});`);
        }else{
        }
    }

    //% block="Total number of RGB ring lights (pcs) [LN] begin [LB] end [LE] duration(ms) [DURATION] Light color [LC]" blockType="command"
    //% LN.shadow="number"  LN.defl=0
    //% LB.shadow="number"  LB.defl=0
    //% LE.shadow="number"  LE.defl=0
    //% DURATION.shadow="number"  DURATION.defl=0
    //% LC.shadow="colorSlider" LC.defl="#f0f"
    export function RGB_Ring_Number(parameter: any, block: any) {
        let ln = parameter.LN.code
        let lb = parameter.LB.code
        let le = parameter.LE.code
        let duration = parameter.DURATION.code
        let lc = parameter.LC.code
        if(Generator.board === 'arduino'){
            let str1 = parseInt('0x' + lc.slice(2, 4))
            let str2 = parseInt('0x' + lc.slice(4, 6))
            let str3 = parseInt('0x' + lc.slice(6, 8))
            Generator.addObject('Rgb_Obj',`RGBLed`,`mRgb(RgbPin, ${ln});`, true);
            Generator.addCode(`for(int i = ${lb} - 1; i<${le}; i++){\n    mRgb.setColorAt(i, ${str1}, ${str2}, ${str3});\n    mRgb.show();\n    delay(${duration});\n  }`);
        }else{
        }
    }

    //空行
    //% block="---"
    export function speace3() {}
    //% block=" ▶ 传感器" blockType="tag"
    export function sensorModule() {}
    // 传感器
    //压力传感器
    //% block="PRESSURE_SENSOR Pressure pin [PRES] " blockType="reporter"
    //% PRES.shadow="dropdown" PRES.options="PIN_AnalogRead"
    export function PRESSURE_SENSOR(parameter: any, block: any){
        let pres = parameter.PRES.code
        if(Generator.board === 'arduino'){
            Generator.addInclude( `pressure_${pres}` ,`int pressurePin_${pres} = ${pres};`);
            Generator.addCode(`analogRead(pressurePin_${pres})`);
        }else{

        }
    }

    //% block="---"
    export function sensorSpeace1() {}
//水蒸气传感器
    //% block="STEAM_SENSOR Steam pin [PRES] " blockType="reporter"
    //% PRES.shadow="dropdown" PRES.options="PIN_AnalogRead"
    export function STEAM_SENSOR(parameter: any, block: any){
        let pres = parameter.PRES.code
        if(Generator.board === 'arduino'){
            Generator.addInclude( `watersensor_${pres}` ,`int waterVaporPin_${pres} = ${pres};`);
            Generator.addCode(`analogRead(waterVaporPin_${pres})`); //修改人：芒果，问题：语法错误，删除`analogRead();`后面的分号//
        }else{

        }
    }

    //% block="---"
    export function sensorSpeace2() {}

// 指南针
    //% block="compass_that compass init" blockType="command"
    export function compass_that(parameter: any, block: any){
        if(Generator.board === 'arduino'){
            Generator.addInclude('compass', `#include "MechaQMC5883.h"\nMechaQMC5883 qmc;\nint x_value, y_value, z_value, azimuth_value;\nvoid readCompass() {\n  int x, y, z;\n  int azimuth;\n  qmc.read(&x, &y, &z, &azimuth);\n  x_value = x;\n  y_value = y;\n  z_value = z;\n azimuth_value = azimuth;\n}`);
            Generator.addSetup('compass', `Wire.begin();\n  qmc.init();`);
        }else{

        }
    }
    //% block="compass_one compass initone" blockType="command"
    export function compass_one(parameter: any, block: any){
        if(Generator.board === 'arduino'){
            Generator.addCode(`readCompass();`);
        }else{

        }
    }
    //% block="compass_little gain compass [COOR]" blockType="reporter"
    //% COOR.shadow="dropdown" COOR.options="COMPASS" 
    export function compass_little(parameter: any, block: any){
        let coor = parameter.COOR.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`${coor}_value`);
        }else{

        }
    }

    //% block="---"
    export function sensorSpeace3() {}
//DS18B20温度
    //% block="DS18B20_sensor_temperature_init pins [PIN]" blockType="command"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalRead" 
    export function DS18B20_sensor_temperature_init(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude('OneWire', `#include <OneWire.h>\n#include <DallasTemperature.h>\n#define ONE_WIRE_BUS ${pin}\n`+'\nOneWire oneWire(ONE_WIRE_BUS);\nDallasTemperature dallasTemperature(&oneWire);\n'+`\nfloat GetDS18B20_value() {\n  dallasTemperature.requestTemperatures();\n  return dallasTemperature.getTempCByIndex(0);\n}`);
            Generator.addSetup(`dallasTemperature`,`dallasTemperature.begin();`);
        }else{
        }
    }
    //% block="DS18B20_sensor_temperature read temperature analog values" blockType="reporter"
    export function DS18B20_sensor_temperature_value(parameter: any, block: any) {
        if(Generator.board === 'arduino'){
            Generator.addCode(`GetDS18B20_value()`);
        }else{
        }
    }

    //% block="---"
    export function sensorSpeace4() {}
//LM35温度
    //% block="read interface [PIN] temperature of LM35 temperature sensor" blockType="reporter"
    //% PIN.shadow="dropdown" PIN.options="PIN_AnalogRead" 
    export function LM35_sensor_temperature_value(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude('LM35', `int temp_pin_${pin} = ${pin};\n`+`\nfloat Readlm35(int pin) {\n  int val, lm35Data;\n  float voltage = 0.0;\n  val = analogRead(pin);\n  voltage = ((float)val/1023);\n  voltage = voltage * 5;\n  lm35Data = voltage * 100;\n  return lm35Data;\n}`);
            Generator.addCode(`Readlm35(temp_pin_${pin})`);
        }else{
        }
    }

    //% block="---"
    export function sensorSpeace5() {}
//火焰
    //% block="flame_sensors_value interface [PIN] analog value" blockType="reporter"
    //% PIN.shadow="dropdown" PIN.options="PIN_AnalogRead" 
    export function flame_sensors_value(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`flamelAnalogPin_${pin}`, `#define flamelAnalogPin_${pin} ${pin}`);
            Generator.addSetup(`flamelAnalogPin_${pin}`, `pinMode(${pin}, INPUT);`);
            Generator.addCode(`analogRead(flamelAnalogPin_${pin})`);
        }else{
        }
    }
    //% block="interface [PIN] is a flame detected?" blockType="boolean"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalRead" 
    export function flame_sensors(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`flamelDigitalPin_${pin}`, `#define flamelDigitalPin_${pin} ${pin}`);
            Generator.addSetup(`flamelDigitalPin_${pin}`, `pinMode(${pin}, INPUT);`);
            Generator.addCode(`digitalRead(flamelDigitalPin_${pin})==0`);
        }else{
        }
    }

    //% block="---"
    export function sensorSpeace6() {}
//单路红外循迹
    //% block="sensor_infraredTracking interface [PIN] whether black lines are detected?" blockType="boolean"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalRead" 
    export function sensor_infraredTracking(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`infraredTracking_${pin}`, `#define infraredTracking_${pin} ${pin}`);
            Generator.addSetup(`infraredTracking_${pin}`, `pinMode(infraredTracking_${pin}, INPUT);`);
            Generator.addCode(`digitalRead(infraredTracking_${pin}) == 1`);
        }else{
        }
    }

    //% block="---"
    export function sensorSpeace7() {}
//倾斜
    //% block="sensor_incline init interface [PIN] is it inclined?" blockType="boolean"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalRead" 
    export function sensor_incline(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`tilt_${pin}`, `#define tilt_${pin} ${pin}`);
            Generator.addSetup(`tilt_${pin}`, `pinMode(tilt_${pin}, INPUT);`);
            Generator.addCode(`digitalRead(tilt_${pin})==LOW`);
        }else{
        }
    }

    //% block="---"
    export function sensorSpeace8() {}
//光敏
    //% block="sensor_illumination init interface [PIN] read the light intensity (analog value)" blockType="reporter"
    //% PIN.shadow="dropdown" PIN.options="PIN_AnalogRead" 
    export function sensor_illumination(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`photosensitivePin_${pin}`, `#define photosensitivePin_${pin} ${pin}\n`);
            Generator.addSetup(`photosensitivePin_${pin}`, `pinMode(photosensitivePin_${pin}, INPUT);`);
            Generator.addCode(`analogRead(photosensitivePin_${pin})`);
        }else{
        }
    }

    //% block="---"
    export function sensorSpeace9() {}
//热敏
    //% block="sensor_thermosensitive init interface [PIN] read the heat (analog value)" blockType="reporter"
    //% PIN.shadow="dropdown" PIN.options="PIN_AnalogRead" 
    export function sensor_thermosensitive(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`thermosensitive_${pin}`, `#define thermalePin_${pin} ${pin}`);
            Generator.addSetup(`thermalePin_${pin}`, `pinMode(thermalePin_${pin}, INPUT);`);
            Generator.addCode(`analogRead(thermalePin_${pin})`);
        }else{
        }
    }

    //% block="---"
    export function sensorSpeace10() {}
//水深
    //% block="sensor_waterLevel init interface [PIN] depth of reading (analog value)" blockType="reporter"
    //% PIN.shadow="dropdown" PIN.options="PIN_AnalogRead" 
    export function sensor_waterLevel(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`depthPin`, `#define depthPin_${pin} ${pin}`);
            Generator.addSetup(`waterLevel_${pin}`,`pinMode(depthPin_${pin}, INPUT);`);
            Generator.addCode(`analogRead(depthPin_${pin})`);
        }else{
        }
    }

    //% block="---"
    export function sensorSpeace11() {}
//土壤湿度A
    //% block="sensor_soilMoisture init interface [PIN] depth of reading (analog value)" blockType="reporter"
    //% PIN.shadow="dropdown" PIN.options="PIN_AnalogRead" 
    export function sensor_soilMoisture(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`soilMosturePin_${pin}`, `#define soilMosturePin_${pin} ${pin}`);
            Generator.addSetup(`sensor_soilMoisture_${pin}`, `pinMode(soilMosturePin_${pin}, INPUT);`);
            Generator.addCode(`analogRead(soilMosturePin_${pin})`);
        }else{
        }
    }
    
    //% block="---"
    export function sensorSpeace12() {}
//避障传感器
    //% block="sensor_obstacleAvoid interface [PIN] analog value" blockType="reporter"
    //% PIN.shadow="dropdown" PIN.options="PIN_AnalogRead"
    export function sensor_obstacleAvoid_value(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            //let name = 'PH20Port' + ' avoidance(P' + pin + ");";
            Generator.addInclude(`avoidance_pin`, `#define avoidance_${pin} ${pin}`);
            Generator.addSetup(`avoidance_${pin}`,`pinMode(avoidance_${pin}, INPUT);`);
            Generator.addCode(`analogRead(avoidance_${pin})`);
        }else{
        }
    }
    //% block="interface [PIN] is there an obstacle detected ahead?" blockType="boolean"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalRead" 
    export function sensor_obstacleAvoid(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`avoidanceB_${pin}`, `#define avoidanceB_${pin} ${pin}`);
            Generator.addSetup(`avoidanceB_${pin}`, `pinMode(avoidanceB_${pin}, INPUT);`);
            Generator.addCode(`digitalRead(avoidanceB_${pin})`);
        }else{
        }
    }

    //% block="---"
    export function sensorSpeace13() {}
// 磁簧开关传感器
    //% block="sensor_reedSwitch interface [PIN] is the magnetic field detected?" blockType="boolean"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalRead" 
    export function sensor_reedSwitch(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`reedSwitch_${pin}`, `#define reedSwitch_${pin} ${pin}`);
            Generator.addSetup(`reedSwitch_${pin}`, `pinMode(reedSwitch_${pin}, INPUT);`);
            Generator.addCode(`analogRead(reedSwitch_${pin}) == LOW`);
        }else{
        }
    }

    //% block="---"
    export function sensorSpeace14() {}
// 人体热释电运动传感器
    //% block="sensor_humanBody interface [PIN] are human signals detected?" blockType="boolean"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalRead" 
    export function sensor_humanBody(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`humanBody_${pin}`, `#define humanBody_${pin} ${pin}`);
            Generator.addSetup(`humanBody_${pin}`, `pinMode(humanBody_${pin}, INPUT);`);
            Generator.addCode(`digitalRead(humanBody_${pin}) == HIGH`);
        }else{
        }
    }

    //% block="---"
    export function sensorSpeace15() {}
// 震动传感器
    //% block="sensor_quake interface [PIN] analog value" blockType="reporter"
    //% PIN.shadow="dropdown" PIN.options="PIN_AnalogRead" 
    export function sensor_quake_value(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`shockAnalogPin_${pin}`, `#define shockAnalogPin_${pin} ${pin}`);
            Generator.addSetup(`sensor_quake_value_${pin}`,`pinMode(shockAnalogPin_${pin}, INPUT);`);
            Generator.addCode(`analogRead(shockAnalogPin_${pin})`);
        }else{
        }
    }
    //% block="interface [PIN] whether vibration is detected？" blockType="boolean"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalRead" 
    export function sensor_quake(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`shockDigitalPin_${pin}`, `#define shockDigitalPin_${pin} ${pin}`);
            Generator.addSetup(`sensor_quake_${pin}`,`pinMode(shockDigitalPin_${pin}, INPUT);`);
            Generator.addCode(`digitalRead(shockDigitalPin_${pin})==0`);
        }else{
        }
    }

    //% block="---"
    export function sensorSpeace16() {}
// 灰度传感器
    //% block="sensor_grayLevel init interface [PIN] analog value" blockType="reporter"
    //% PIN.shadow="dropdown" PIN.options="PIN_AnalogRead" 
    export function sensor_grayLevel(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`grayLevel_${pin}`, `#define grayLevel_${pin} ${pin}`);
            Generator.addSetup(`grayLevel_${pin}`, `pinMode(grayLevel_${pin}, INPUT); `);
            Generator.addCode(`analogRead(grayLevel_${pin})`);
        }else{
        }
    }

    //% block="---"
    export function sensorSpeace17() {}
// 声音传感器
    //% block="sensor_sound interface [PIN] analog value" blockType="reporter"
    //% PIN.shadow="dropdown" PIN.options="PIN_AnalogRead" 
    export function sensor_sound_value(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`sound_analogPin_${pin}`, `#define sound_analogPin_${pin} ${pin}`);
            Generator.addSetup(`sound_analogPin_${pin}`, `pinMode(sound_analogPin_${pin}, INPUT);`);
            Generator.addCode(`analogRead(sound_analogPin_${pin})`);
        }else{
        }
    }

    //% block="interface [PIN] whether sound is detected？" blockType="boolean"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalRead" 
    export function sensor_sound(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`sensor_sound_${pin}`, `#define sound_digitalPin_${pin} ${pin}`);
            Generator.addSetup(`sound_digitalPin_${pin}`, `pinMode(sound_digitalPin_${pin}, INPUT);`);
            Generator.addCode(`digitalRead(sound_digitalPin_${pin})==0`);
        }else{
        }
    }

    //% block="---"
    export function sensorSpeace18() {}
// 雨滴传感器
    //% block="sensor_rain interface [PIN] analog value" blockType="reporter"
    //% PIN.shadow="dropdown" PIN.options="PIN_AnalogRead" 
    export function sensor_rain_value(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`raindropAnalogPin_${pin}`, `#define raindropAnalogPin_${pin} ${pin}`);
            Generator.addSetup(`sensor_rain_value_${pin}`, `pinMode(raindropAnalogPin_${pin}, INPUT);`);
            Generator.addCode(`analogRead(raindropAnalogPin_${pin})`);
        }else{
        }
    }
    //% block="interface [PIN] whether raindrops are detected？" blockType="boolean"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalRead" 
    export function sensor_rain(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`RaindropDigitalPin_${pin}`, `#define RaindropDigitalPin_${pin} ${pin}`);
            Generator.addSetup(`sensor_rain_${pin}`,`pinMode(RaindropDigitalPin_${pin}, INPUT);`);
            Generator.addCode(`digitalRead(RaindropDigitalPin_${pin})`);
        }else{
        }
    }

    //% block="---"
    export function sensorSpeace19() {}
// 气体传感器
    //% block="sensor_gas interface [PIN] analog value" blockType="reporter"
    //% PIN.shadow="dropdown" PIN.options="PIN_AnalogRead" 
    export function sensor_gas_value(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`gasAnalogPin_${pin}`, `#define gasAnalogPin_${pin} ${pin}`);
            Generator.addSetup(`sensor_gas_value_${pin}`,`pinMode(gasAnalogPin_${pin}, INPUT);`);
            Generator.addCode(`analogRead(gasAnalogPin_${pin})`);
        }else{
        }
    }
    //% block="interface [PIN] whether raindrops are detected？" blockType="boolean"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalRead" 
    export function sensor_gas(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude(`gaslDigitalPin_${pin}`, `#define gaslDigitalPin_${pin} ${pin}`);
            Generator.addSetup(`sensor_gas_${pin}`,`pinMode(gaslDigitalPin_${pin}, INPUT);`);
            Generator.addCode(`digitalRead(gaslDigitalPin_${pin})`);
        }else{
        }
    }

    //% block="---"
    export function sensorSpeace20() {}
// RGB超声波
    //% block="RGB_Ultrasound initialize pins IO [IO] RGB [RGB]" blockType="command"
    //% IO.shadow="dropdown" IO.options="PIN_DigitalRead" 
    //% RGB.shadow="dropdown" RGB.options="PIN_DigitalWrite" 
    export function RGB_Ultrasound(parameter: any, block: any) {
        let io = parameter.IO.code
        let rgb = parameter.RGB.code
        if(Generator.board === 'arduino'){
            Generator.addInclude('RgbUltrasonic', `#include <RgbUltrasonic.h>\nRgbUltrasonic mRUS04(${io}, ${rgb});`);
        }else{
        }
    }
    //% block="RGB_Ultrasound_Display [AZIMUTH] lamp color [COLOR] style [STYLE]" blockType="command"
    //% AZIMUTH.shadow="dropdown" AZIMUTH.options="AZIMUTH" 
    //% COLOR.shadow="colorSlider" COLOR.defl="#f0f"
    //% STYLE.shadow="dropdown" STYLE.options="STYLE" 
    export function RGB_Ultrasound_Display(parameter: any, block: any) {
        let azimuth = parameter.AZIMUTH.code
        let color = parameter.COLOR.code
        let style = parameter.STYLE.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`mRUS04.SetRgbEffect(${azimuth}, ${color}, ${style});\n  delay(1000);`);
        }else{
        }
    }
    //% block="RGB_Ultrasound module reads ultrasonic distance" blockType="reporter"
    export function RGB_Ultrasound_Read(parameter: any, block: any) {
        if(Generator.board === 'arduino'){
            Generator.addCode(`mRUS04.GetUltrasonicDistance()`);
        }else{
        }
    }

    //% block="---"
    export function sensorSpeace21() {}
// 超声波
    //% block="General_Ultrasound get distance(cm) Echo [E_PIN] Trig [T_PIN]" blockType="reporter"
    //% E_PIN.shadow="dropdown" E_PIN.options="PIN_DigitalRead" 
    //% T_PIN.shadow="dropdown" T_PIN.options="PIN_DigitalWrite" 
    export function General_Ultrasound(parameter: any, block: any) {
        let e_pin = parameter.E_PIN.code
        let t_pin = parameter.T_PIN.code
        if(Generator.board === 'arduino'){
            Generator.addObject('Ult_Obj','const',`int TrigPin = ${t_pin};\nconst int EchoPin = ${e_pin};\nfloat Ultrasound_Value;`)
            Generator.addObject('Ult_Obj1',' ',`\nfloat Ultrasound () {\n  digitalWrite(TrigPin, LOW);\n  delayMicroseconds(2);\n  digitalWrite(TrigPin, HIGH);\n  delayMicroseconds(10);\n  digitalWrite(TrigPin, LOW);\n  Ultrasound_Value=pulseIn(EchoPin, HIGH) / 58.00;\n  return Ultrasound_Value;\n}`)
            Generator.addSetup(`pinMode1`,`pinMode(TrigPin, OUTPUT);`);
            Generator.addSetup(`pinMode2`,`pinMode(EchoPin, INPUT);`);
            Generator.addCode(`Ultrasound ()`);
        }else{
        }
    }

    //% block="---"
    export function sensorSpeace22() {}
// DH11温湿度
    //% block="dht11value interface [PIN] read [DH]" blockType="reporter"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalRead" 
    //% DH.shadow="dropdown" DH.options="DH" 
    export function dht11value(parameter: any, block: any) {
        let pin = parameter.PIN.code
        let th = parameter.DH.code
        if(Generator.board === 'arduino'){
            Generator.addInclude('dht11', `#include <dht11.h>`);
            Generator.addInclude(`dht11_${pin}`, `#define DHT11Pin_${pin} ${pin}`);
            Generator.addObject('dht11obj','dht11','dht11;\nfloat dht_value;'+`\nfloat Dht_Read (int pin) {\n  dht11.read(pin);\n  dht_value=(float)dht11.${th};\n  return dht_value;\n}`);
            Generator.addCode(`Dht_Read (DHT11Pin_${pin})`);
        }else{
        }
    }

    //空行
    //% block="---"
    export function speace4() {}
    //% block=" ▶ 智能模块" blockType="tag"
    // DS1302
    //% block="Clock_Module initialize pins CLK[CLK] DAT[DAT] RST[RST]" blockType="command"
    //% CLK.shadow="dropdown" CLK.options="PIN_DigitalWrite"
    //% DAT.shadow="dropdown" DAT.options="PIN_DigitalRead"
    //% RST.shadow="dropdown" RST.options="PIN_DigitalWrite" 
    export function Clock_Module(parameter: any, block: any) {
        let clk = parameter.CLK.code
        let dat = parameter.DAT.code
        let rst = parameter.RST.code
        if(Generator.board === 'arduino'){
            Generator.addInclude('DS1302','#include "DS1302.h"');
            Generator.addObject('DS1302obj','DS1302',`rtc(${rst}, ${dat}, ${clk});`);
        }else{
        }
    }
    //% block="Set_Clock_Module set the date year[YEAR] month[MONTH] day[DAY]" blockType="command"
    //% YEAR.shadow="number" YEAR.defl=0
    //% MONTH.shadow="number" MONTH.defl=0
    //% DAY.shadow="number" DAY.defl=0
    export function Set_Clock_Module(parameter: any, block: any) {
        let year = parameter.YEAR.code
        let month = parameter.MONTH.code
        let day = parameter.DAY.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`rtc.setDate(${month}, ${day}, ${year});`);
        }else{
        }
    }
    //% block="Time_Clock_Module set the time time[TIME] minute[MINUTE] second[SECOND]" blockType="command"
    //% TIME.shadow="number" TIME.defl=0
    //% MINUTE.shadow="number" MINUTE.defl=0
    //% SECOND.shadow="number" SECOND.defl=0
    export function Time_Clock_Module(parameter: any, block: any) {
        let time = parameter.TIME.code
        let minute = parameter.MINUTE.code
        let second = parameter.SECOND.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`rtc.setTime(${time}, ${minute}, ${second});`);
        }else{
        }
    }
    //% block="Getdate_Clock_Module DS1302 Module get [TIMES]" blockType="reporter"
    //% TIMES.shadow="dropdown" TIMES.options="TIMES"
    export function Getdate_Clock_Module(parameter: any, block: any) {
        let times = parameter.TIMES.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`rtc.${times}()`);
        }else{
        }
    }

    //% block="---"
    export function smartSpeace1() {}
    //颜色识别
    //% block="COLOR_CGQ1 Initialize the color sensor" blockType="command"
    export function COLOR_CGQ1(parameter: any, block: any){
        if(Generator.board === 'arduino'){
            Generator.addInclude( 'color1' ,`#include <EM_TCS34725.h>\nEM_TCS34725 tcs34725;`);
            Generator.addSetup('color1',`tcs34725.begin();`);
        }else{

        }
    }
    //% block="COLOR_CGQ2 Read color sensor [COL1] [COL2]" blockType="reporter"
    //% COL1.shadow="dropdown" COL1.options="COLOR_ONE"
    //% COL2.shadow="dropdown" COL2.options="COLOR_two"
    export function COLOR_CGQ2(parameter: any, block: any){
        let col1 = parameter.COL1.code
        let col2 = parameter.COL2.code
        if(Generator.board === 'arduino'){
            col2 = col2 ==1?'':col2;
            Generator.addCode(`tcs34725.get${col1}${col2}()`);
        }else{

        }
    }

    //空行
    //% block="---"
    export function speace5() {}
    //% block=" ▶ 通信模块" blockType="tag"
    export function communicationModule() {}
    // 通信模块
    // 红外发射 
    //% block="setIR_pin pin [PIN] coded value [VALUE]" blockType="command"
    //% PIN.shadow="dropdown" PIN.options="PIN_Duankou" 
    //% VALUE.shadow="number" VALUE.defl=0x89 
    export function setIR_pin(parameter: any, block: any) {
        let pin = parameter.PIN.code
        let value = parameter.VALUE.code
        if(Generator.board === 'arduino'){
            Generator.addInclude('IRremote_pin', `#include <IRremote.h>` );
            Generator.addObject(`IROBJ_${pin}`,`IRremote`,`irsend_${pin}(${pin});`);
            Generator.addCode(` irsend_${pin}.sendNEC(${value});`);
        }else{
        }
    }


 /*
//红外接收
    //% block="setREC_pin pin [PIN] whether data has been received" blockType="boolean"
    //% PIN.shadow="dropdown" PIN.options="PIN_Duankou" 
    export function setREC_pin(parameter: any, block: any) {
        let pin = parameter.PIN.code
        if(Generator.board === 'arduino'){
            Generator.addInclude('IRremote_pin', '#include <IRremote.h>\n');
            Generator.addObject(`IRobj`,`IRremote`,`ir(${pin});`);
            Generator.addCode(` ir.getCode() != 0`);
        }else{
        }
    }
//读取红外接收编码值
    //% block="the coded value received by the infrared receiving sensor" blockType="reporter"
    export function setREC_value(parameter: any, block: any) {
        if(Generator.board === 'arduino'){
            Generator.addCode(` ir.getCode()`);
            Generator.addSetup(`ir.enableIRIn`,` ir.enableIRIn();`);
        }else{
        }
    }
*/
    //% block="---"
    export function communicationSpeace1() {}
// 普通红外遥控
    //% block="Ordinary INFRARED remote receiver initialization interface [PIN] press the ordinary infrared remote control [BUTTON]" blockType="boolean"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalRead" 
    //% BUTTON.shadow="dropdown" BUTTON.options="BUTTON" 
    export function OnPressEvent(parameter: any, block: any) {
        let pin = parameter.PIN.code
        let button = parameter.BUTTON.code
        if(Generator.board === 'arduino'){
            Generator.addInclude('IRremote_pin', '#include <IRremote.h>');
            Generator.addInclude('keymap', '#include <Keymap.h>');
            Generator.addObject(`IRobj_${pin}`, `IRremote`, `ir_${pin}(${pin});`);
            Generator.addCode(` ir_${pin}.getIrKey(ir_${pin}.getCode(), 1) == ${button}`);
        }else{
        }
    }
    //% block="---"
    export function communicationSpeace2() {}
// emakerfun红外遥控
    //% block="emakefun INFRARED remote receiver initialization interface [PIN] press the emakefun infrared remote control [BUTTON]" blockType="boolean"
    //% PIN.shadow="dropdown" PIN.options="PIN_DigitalRead" 
    //% BUTTON.shadow="dropdown" BUTTON.options="EM_BUTTON" 
    export function EM_OnPressEvent(parameter: any, block: any) {
        let pin = parameter.PIN.code
        let button = parameter.BUTTON.code
        if(Generator.board === 'arduino'){
            Generator.addInclude('PH20Port', '#include <IRremote.h>');
            Generator.addInclude('keymap','#include <Keymap.h>');
            Generator.addObject(`EMIR_${pin}`,`IRremote`,`iremakefun_${pin}(${pin});`);
            Generator.addCode(` iremakefun_${pin}.getIrKey(iremakefun_${pin}.getCode(), 2) == ${button}`);
        }else{
        }
    }

    //% block="---"
    export function communicationSpeace3() {}

// NRF2401
    //% block="NRF24_mind3 NRF24 initializes pin CE [MID3] pin CS [MID3_1] " blockType="command"
    //% MID3.shadow="dropdown" MID3.options="NRF_MIND3" MID3.defl="NRF_MIND3.2"
    //% MID3_1.shadow="dropdown" MID3_1.options="NRF_MIND3" MID3_1.defl="NRF_MIND3.3"
    export function NRF24_mind3(parameter: any, block: any){
        let mid3 = parameter.MID3.code
        let mid3_1 = parameter.MID3_1.code
        if(Generator.board === 'arduino'){
            Generator.addInclude('nrf24' ,`#include<SPI.h>\n#include <RF24.h>`);
            Generator.addObject('radio' ,`RF24`,`radio(${mid3}, ${mid3_1});`);
            
        }else{

        }
    }
    //% block="NRF24_mind0 Initialize the nRF24 send address [MID0]" blockType="command"
    //% MID0.shadow="number" MID0.defl=0xffee
    export function NRF24_mind0(parameter: any, block: any){
        let mid0 = parameter.MID0.code
        if(Generator.board === 'arduino'){
            Generator.addInclude('nrf24' ,`#include<SPI.h>\n#include <RF24.h>`);
            Generator.addSetup('nrf240',`radio.begin();\n  radio.openWritingPipe(${mid0});`);
        }else{

        }
    }
    //% block="NRF24_mind1 Initialize the nRF24 write address [MID1]" blockType="command"
    //% MID1.shadow="number" MID1.defl=0xffee
    export function NRF24_mind1(parameter: any, block: any){
        let mid1 = parameter.MID1.code
        if(Generator.board === 'arduino'){
            Generator.addInclude('nrf24' ,`#include<SPI.h>\n#include <RF24.h>`);
            Generator.addSetup('nrf241',`radio.begin();\nradio.openReadingPipe(1, ${mid1});`);
        }else{

        }
    }
    //% block="NRF24_mind2 NRF24 functional level [MID2] " blockType="command"
    //% MID2.shadow="dropdown" MID2.options="NRF_MIND2"
    export function NRF24_mind2(parameter: any, block: any){
        let mid2 = parameter.MID2.code
        if(Generator.board === 'arduino'){
            Generator.addSetup('nrf242',`radio.setPALevel(${mid2});`);
        }else{

        }
    }
    //% block="NRF24_mind4 NRF24 txd [MID4] " blockType="command"
    //% MID4.shadow="number" MID4.defl=0xABCDEF123
    export function NRF24_mind4(parameter: any, block: any){
        let mid4 = parameter.MID4.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`radio.write(&${mid4}, sizeof());`);
        }else{

        }
    }
    //% block="NRF24_mind5 NRF24 txd string [MID5] " blockType="command"
    //% MID5.shadow="string" MID5.defl="abcdef"
    export function NRF24_mind5(parameter: any, block: any){
        let mid5 = parameter.MID5.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`char rf_value[] = ${mid5};\nradio.write(rf_value, sizeof(rf_value));`);
        }else{

        }
    }
    //% block="NRF24_mind6 NRF24 monitor [MID6] " blockType="command"
    //% MID6.shadow="dropdown" MID6.options="NRF_MIND6"
    export function NRF24_mind6(parameter: any, block: any){
        let mid6 = parameter.MID6.code
        if(Generator.board === 'arduino'){
            Generator.addCode(`radio.${mid6}();`);
        }else{

        }
    }
    // //% block="NRF24_mind7 NRF24 rex [MID7]" blockType="command"
    // //% MID7.shadow="string" MID7.defl="接收值"
    // export function NRF24_mind7(parameter: any, block: any){
    //     let mid7 = parameter.MID7.code
    //     if(Generator.board === 'arduino'){
    //         Generator.addCode(`cradio.read(&${mid7}, sizeof() );\n`);
    //     }else{

    //     }
    // }
    //% block="NRF24_mind8 NRF24 rex string data" blockType="reporter"
    export function NRF24_mind8(parameter: any, block: any){
        if(Generator.board === 'arduino'){
            Generator.addInclude( 'nrf248' ,`char aary[100]={0};\nString receiving(){\nradio.read(aary, sizeof(aary) );\nString data = aary;\nreturn data;\n}`);
            Generator.addCode(`receiving()`);
        }else{

        }
    }
    //% block="NRF24_mind9 NRF24 rate [MID9]" blockType="command"
    //% MID9.shadow="dropdown" MID9.options="NRF_MIND9"
    export function NRF24_mind9(parameter: any, block: any){
        let mid9 = parameter.MID9.code
        if(Generator.board === 'arduino'){
            if(mid9==250){
                Generator.addSetup('nrf249',`radio.setDataRate(RF24_${mid9}KBPS);`);
            }else{
                Generator.addSetup('nrf249',`radio.setDataRate(RF24_${mid9}MBPS);`);
            }
        }else{

        }
    }
    //% block="NRF24_mind10 NRF24 set communication channel [MID10] " blockType="command"
    //% MID10.shadow="number" MID10.defl=115
    export function NRF24_mind10(parameter: any, block: any){
        let mid10 = parameter.MID10.code
        if (Generator.board === 'arduino') {
            Generator.addSetup('nrf2410',`radio.setChannel(${mid10});`);
        } else {
            
        }
    }


    

    

    


    

    





    function bin_to_hex(str) {
        let hex_array = [{key:0,val:"0000"},{key:1,val:"0001"},{key:2,val:"0010"},{key:3,val:"0011"},{key:4,val:"0100"},{key:5,val:"0101"},{key:6,val:"0110"},{key:7,val:"0111"},
            {key:8,val:"1000"},{key:9,val:"1001"},{key:'a',val:"1010"},{key:'b',val:"1011"},{key:'c',val:"1100"},{key:'d',val:"1101"},{key:'e',val:"1110"},{key:'f',val:"1111"}]
        let value = ''
        let list=[]
        console.log(str)
        if(str.length%4!==0){
            let a = "0000"
            let b=a.substring(0,4-str.length%4)
            str = b.concat(str)
        }
        console.log(str)
        while (str.length > 4) {
            list.push(str.substring(0, 4))
            str = str.substring(4);
        }
        list.push(str)
        console.log(list)
        for(let i=0;i<list.length;i++){
            for(let j=0;j<hex_array.length;j++){
                if(list[i]==hex_array[j].val){
                    value = value.concat(hex_array[j].key)
                    break
                }
            }
        }
        console.log(value)
        return value
    }

    
    function hexToRgb(hex) {
        return 'rgb(' + parseInt('0x' + hex.slice(2, 4)) + ',' + parseInt('0x' + hex.slice(4, 6))
                + ',' + parseInt('0x' + hex.slice(6, 8)) + ')';
      }

    function replace(str :string) {
        return str.replace("+", "");
    }
    

}
